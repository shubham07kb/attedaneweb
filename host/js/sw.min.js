const cacheName = "v1", cacheAssets = ["/", "/app.js", "/favicon.ico"]; self.addEventListener("install", e => { e.waitUntil(caches.open("v1").then(e => { e.addAll(cacheAssets) }).then(() => { self.skipWaiting(), console.log("installed") })) }), self.addEventListener("activate", e => { e.waitUntil(caches.keys().then(e => Promise.all(e.map(e => { if ("v1" != e) return console.log("Service Worker Clearing Cache"), caches.delete(e) })))) }), self.addEventListener("fetch", e => { e.respondWith(fetch(e.request).catch(() => cacheAssets.match(e.request))) });